{
  "goal": "Below is a full technical specification for a “GitHub Star Exchange” service inspired by githubstar.com, but rebuilt from scratch with a new UI/UX and architecture, integrated with **GitHub** (it now explicitly allows automation).\n\nWhere I say “repository stars/follows/watches/forks”, read it as GitHub equivalents.\n\n---\n\n## 0. Glossary\n\n* **GitHub** – Git hosting platform (GitHub-like).\n* **Star / Watch / Fork / Follow** – engagement primitives on GitHub.\n* **Action** – a single user operation on GitHub (star, follow, watch, fork).\n* **Campaign** – a promotion configuration for a single repository (or account).\n* **Credit** – internal currency used to incentivize mutual actions.\n* **Exchange job** – background task pairing “giver” and “receiver” for an action.\n\n---\n\n## 1. Product Overview\n\n### 1.1. Goal\n\nBuild a SaaS platform that helps GitHub developers mutually grow:\n\n* repository stars;\n* repository watches;\n* repository forks;\n* account followers.\n\nCore idea (similar to githubstar.com): users perform actions on other people’s projects/accounts and earn **credits**. They spend credits to receive actions on their own projects. Features roughly parallel “Reciprocal Stars / Follows / Histories / Block List / Premium” seen on GitHubStar. ([GitHub Star][1])\n\n### 1.2. High-level user flows\n\n1. User signs up on the site.\n2. User connects GitHub account via OAuth.\n3. User imports their GitHub repositories.\n4. User creates a **campaign** for repo/account (e.g. “Get more stars”).\n5. User goes to “Earn” and stars/follows other repos/accounts suggested by the system.\n6. Each completed action earns **credits**.\n7. Credits are spent automatically to drive actions towards campaigns, via other users.\n8. User can see detailed **history** of given/received stars/watches/forks/follows and manage **block list**.\n\n---\n\n## 2. Functional Requirements\n\n### 2.1. User & Authentication\n\n#### 2.1.1. Sign-up / Sign-in\n\n* Email/password registration:\n\n  * Fields: email, password, display name.\n  * Email verification via one-time link.\n* Social login:\n\n  * GitHub OAuth used for:\n\n    * login;\n    * linking GitHub account;\n    * authorizing API calls.\n* Session management:\n\n  * JWT-based stateless sessions (access + refresh tokens).\n  * Secure cookies (HTTP-only, SameSite=Lax/Strict) or local storage strategy (configurable).\n\n#### 2.1.2. Roles\n\n* `USER` – default.\n* `ADMIN` – manage platform-wide configuration, moderation, bans.\n* Optional `MODERATOR` – manage block list escalations, detect abuse.\n\n### 2.2. GitHub Integration\n\nAssume GitHub provides a REST/GraphQL API broadly similar to GitHub’s.\n\n#### 2.2.1. OAuth\n\n* OAuth 2.0 Authorization Code with PKCE:\n\n  * Request scopes:\n\n    * `read:user` – basic profile;\n    * `read:repo` – repo list, metadata;\n    * `write:star`, `write:follow` (or equivalent) – to star/follow on user’s behalf;\n    * `read:events` – to verify actions, if available.\n* Store:\n\n  * `access_token`, `refresh_token`, `expires_at`, `scope`.\n  * Encrypt tokens at rest (KMS or application-level AES-GCM).\n\n#### 2.2.2. API operations\n\nMinimum required operations:\n\n* Get authenticated user:\n\n  * `GET /user` → `{ id, login, avatar_url, html_url }`.\n* Get user repositories:\n\n  * `GET /user/repos?type=owner&per_page=...` → list of repos with:\n\n    * id, name, full_name, description, language, stargazers_count, watchers_count, forks_count, html_url.\n* Star repository:\n\n  * `PUT /user/starred/{owner}/{repo}`.\n* Watch (if separate concept) – or subscribe:\n\n  * `PUT /repos/{owner}/{repo}/subscription`.\n* Fork repository:\n\n  * `POST /repos/{owner}/{repo}/forks`.\n* Follow user:\n\n  * `PUT /user/following/{username}`.\n* Check if an action already exists:\n\n  * `GET /user/starred/{owner}/{repo}` → 204/404 pattern.\n  * `GET /user/following/{username}`.\n* (Optional) Webhooks:\n\n  * Listen to events `star`, `fork`, `watch`, `follow` to confirm actions without polling.\n\n> If GitHub API differs, adapt endpoints but keep same abstraction: **perform action**, **verify action**, **list user resources**.\n\n#### 2.2.3. Rate limiting & backoff\n\n* Maintain per-user and global API rate-limit counters.\n* Implement exponential backoff on 429 / rate-limit headers.\n* Maintain “cooldown windows” per user for outbound actions.\n\n### 2.3. Repository & Campaign Management\n\n#### 2.3.1. Repo import & sync\n\n* On first link:\n\n  * Fetch all owned repositories; store in DB.\n* Subsequent sync:\n\n  * On demand (“Sync now” button).\n  * Nightly background job to refresh star/fork/watch/follow counts.\n* Fields per repo:\n\n  * external_id, full_name, owner_login, description, language, stars, forks, watchers, last_synced_at.\n\n#### 2.3.2. Campaign model\n\nFor each repo or account, user can create **campaigns**:\n\n* Types:\n\n  * `STAR`, `WATCH`, `FORK`, `FOLLOW_ACCOUNT` (for their GitHub user).\n* Settings per campaign:\n\n  * Target entity: repository_id or github_user_id.\n  * Status: `ACTIVE`, `PAUSED`, `COMPLETED`.\n  * Daily budget in credits.\n  * Max total actions.\n  * Per-user limit (e.g. one action per user per X days).\n  * GEO / language / tag filters (optional, for future extension).\n* System ensures:\n\n  * Credits are reserved when a match is created.\n  * Credits are spent when action is verified.\n\n### 2.4. Earning Actions (“Earn” flow)\n\n#### 2.4.1. Matching model\n\n* A user visiting **Earn** selects:\n\n  * Which action types they are willing to perform: star/watch/fork/follow.\n  * Optional filters (language, tags).\n* System returns a **queue of tasks**:\n\n  * Each task is “Perform STAR on repo X for Y credits”.\n  * Tasks are ranked by:\n\n    * campaign priority (e.g. higher credit per action);\n    * campaign age;\n    * fairness (prevent same user repeatedly starring same owner).\n* Each task:\n\n  * Contains minimal repo info + owner + link to open in new tab.\n  * “Mark as done” button to confirm action.\n\n#### 2.4.2. Action verification\n\nTo prevent cheating, verification must use GitHub API:\n\n* When user hits “Mark as done”:\n\n  1. Frontend calls `POST /api/actions/{task_id}/complete`.\n  2. Backend:\n\n     * Uses user’s GitHub token.\n     * Calls GitHub to check if action exists (e.g. `GET /user/starred/{owner}/{repo}`).\n\n       * If not found:\n\n         * Option 1: try to create the action automatically via API.\n         * Option 2: return “Action not found; please star and retry.”\n     * On success:\n\n       * Mark action as `COMPLETED`.\n       * Credit earnings to the user’s balance.\n       * Mark the mapping in history for the target campaign (for the receiver).\n* Background watchdog:\n\n  * Randomly re-checks a percentage of actions to make sure users do not unstar/unfollow immediately.\n  * If reversal detected within X hours:\n\n    * Revoke credits.\n    * Increment user’s “trust penalty” score.\n\n### 2.5. Credit & Premium System\n\n#### 2.5.1. Credits\n\n* 1 action (e.g. star) yields N credits (configurable per type).\n* Receiving action consumes M credits.\n* Typical mapping:\n\n  * Earn 1–2 credits per star.\n  * Spend 2–3 credits per incoming star.\n* Balance:\n\n  * `user.credit_balance`:\n\n    * Updated in transactions table (`credit_transactions`) with type, source, metadata.\n* Edge cases:\n\n  * If campaign has no credits:\n\n    * It stops showing in Earn feed.\n  * If user has no credits:\n\n    * They can only earn, not run campaigns (unless free tier includes some free impressions).\n\n#### 2.5.2. Premium\n\nBased on GitHubStar’s “Upgrade Premium” concept. ([GitHub Star][1])\n\n* Plans:\n\n  * Free: daily limits on actions performed and received; limited campaigns.\n  * Pro: higher limits; priority in matching; can configure multiple concurrent campaigns.\n* Billing:\n\n  * Implementation left for later (Stripe/YooKassa etc).\n  * Subscription table: `subscription_plan`, `status`, `renews_at`.\n\n### 2.6. Histories & Analytics\n\nMirroring “Star History / Watch History / Fork History / Follow History” features. ([GitHub Star][1])\n\n* History views:\n\n  * Given Stars/Received Stars.\n  * Given Watches/Received Watches.\n  * Given Forks/Received Forks.\n  * Given Follows/Received Follows.\n* Columns:\n\n  * Date/time.\n  * Counterparty user.\n  * Repo/account.\n  * Action type.\n  * Credits earned/spent.\n  * Status (completed, reversed, disputed).\n* Filters:\n\n  * Date range, repo, action type.\n* Export as CSV.\n\n### 2.7. Block List & Trust\n\n* Block list:\n\n  * User can block:\n\n    * specific GitHub users;\n    * specific repos;\n    * entire languages/tags (optional).\n  * Blocking prevents:\n\n    * their campaigns from appearing in your Earn feed;\n    * them from receiving your actions.\n* Trust mechanisms:\n\n  * Track “reversal ratio” (how often given actions are undone soon after).\n  * Automatically:\n\n    * reduce credit rewards for low trust;\n    * deprioritize them in matching;\n    * or flag for admin review.\n\n### 2.8. Localization & Settings\n\nGitHubStar has multi-language UI; we mirror that. ([GitHub Star][1])\n\n* UI languages: EN, RU initially (extendable).\n* Settings:\n\n  * Preferred UI language.\n  * Timezone.\n  * Email notifications toggle.\n  * Default action types to perform.\n\n### 2.9. Notifications\n\n* In-app notifications:\n\n  * “You received 10 new stars on repo X.”\n  * “Campaign Y paused due to low credits.”\n* Email notifications (optional):\n\n  * Periodic summary.\n  * Account warnings (abuse, trust score changes).\n\n### 2.10. Admin Panel\n\n* View users, campaigns, balances.\n* Global block list:\n\n  * For spammy GitHub accounts or repos.\n* Abuse detection dashboard:\n\n  * Users with high reversal ratio.\n  * Suspicious patterns (very high volume in short time).\n* Manual adjustments:\n\n  * Freeze credit balance.\n  * Force cancel campaigns.\n  * Ban users.\n\n---\n\n## 3. Non-Functional Requirements\n\n* Availability: 99.5% monthly (single region).\n* Latency:\n\n  * API responses < 300 ms P95 (excluding GitHub API latency).\n* Scalability:\n\n  * Must handle:\n\n    * 10–50k users.\n    * Up to 10 actions/s average.\n* Security:\n\n  * HTTPS everywhere.\n  * Encrypted tokens & secrets.\n  * Role-based access control.\n* Observability:\n\n  * Structured logs.\n  * Metrics (Prometheus style).\n  * Basic traces (optional).\n\n---\n\n## 4. System Architecture\n\n### 4.1. Components\n\n1. **Frontend SPA**\n\n   * Tech: React + TypeScript + Next.js or Vite.\n   * Uses REST/GraphQL API.\n   * Handles auth (JWT in cookie / local storage).\n\n2. **Backend API**\n\n   * Tech: Node.js + TypeScript + NestJS/Express.\n   * Concerns:\n\n     * Auth & sessions.\n     * GitHub OAuth integration.\n     * Credit & campaign logic.\n     * History, block list.\n   * Exposes JSON REST API.\n\n3. **Background Worker**\n\n   * Tech: Node.js service (separate process/container).\n   * Responsibilities:\n\n     * Action verification.\n     * Matching and queue scheduling.\n     * Periodic GitHub sync.\n     * Trust scoring.\n\n4. **Database**\n\n   * PostgreSQL on Render (managed Postgres). ([Render][2])\n\n5. **Cache / Queue**\n\n   * Redis or Render Key Value (or Redis-compatible) for:\n\n     * job queue (BullMQ / custom);\n     * rate-limit counters;\n     * short-term state. ([Render][3])\n\n6. **Render deployment**\n\n   * One web service for API + SPA.\n   * One background worker service.\n   * One Postgres instance.\n   * One Redis/Key-Value instance. ([Render][4])\n\n### 4.2. Data flow examples\n\n#### 4.2.1. User performs star to earn credits\n\n1. User opens Earn page → `GET /api/tasks?type=STAR`.\n2. API returns prioritized list of tasks.\n3. User clicks “Open on GitHub” → new tab with repo.\n4. User stars repo on GitHub.\n5. User clicks “Mark as done”.\n6. API enqueues verification job:\n\n   * Worker uses GitHub token to verify.\n   * On success, writes `actions` record, updates credit balance, updates campaign counters.\n\n#### 4.2.2. Campaign consumption\n\n1. Worker periodically:\n\n   * Selects campaigns with available credits.\n   * Creates tasks and inserts into `exchange_queue`.\n2. When other users request tasks, they consume from queue.\n3. Completed tasks spend credits.\n\n---\n\n## 5. Data Model (Relational Schema)\n\nUsing PostgreSQL. Primary key type: `bigserial` or UUID.\n\n### 5.1. `users`\n\n* `id`\n* `email` (unique, nullable if OAuth-only)\n* `password_hash` (nullable if OAuth-only)\n* `display_name`\n* `role` (`USER`, `ADMIN`, `MODERATOR`)\n* `created_at`, `updated_at`\n* `last_login_at`\n* `credit_balance` (int, default 0)\n* `ui_language` (e.g. `en`, `ru`)\n* `timezone`\n\n### 5.2. `oauth_accounts`\n\n* `id`\n* `user_id` FK → users\n* `provider` (`github`)\n* `provider_user_id` (string)\n* `access_token` (encrypted)\n* `refresh_token` (encrypted, nullable)\n* `expires_at` (timestamp)\n* `scope` (string)\n* `created_at`, `updated_at`\n* Unique `(provider, provider_user_id)`.\n\n### 5.3. `github_profiles`\n\n* `id`\n* `user_id` FK → users\n* `github_login`\n* `github_user_id` (string)\n* `avatar_url`\n* `html_url`\n* `public_repos_count`\n* `followers_count`\n* `following_count`\n* `last_synced_at`\n\n### 5.4. `repositories`\n\n* `id`\n* `user_id` FK → users (owner on platform)\n* `github_repo_id` (string)\n* `full_name` (`owner/name`)\n* `name`\n* `owner_login`\n* `description`\n* `language`\n* `stars_count`\n* `forks_count`\n* `watchers_count`\n* `html_url`\n* `is_private`\n* `last_synced_at`\n* Unique `github_repo_id`.\n\n### 5.5. `campaigns`\n\n* `id`\n* `user_id` (campaign owner)\n* `type` (`STAR`, `WATCH`, `FORK`, `FOLLOW_ACCOUNT`)\n* `repository_id` FK → repositories (nullable for account follow)\n* `target_github_user_id` (for FOLLOW_ACCOUNT)\n* `status` (`ACTIVE`, `PAUSED`, `COMPLETED`)\n* `daily_credit_budget`\n* `total_credit_budget`\n* `credits_spent` (int)\n* `max_actions_total`\n* `actions_per_user_limit` (int)\n* `title` (optional)\n* `created_at`, `updated_at`\n* `starts_at`, `ends_at` (nullable)\n\n### 5.6. `tasks` (exchange queue)\n\n* `id`\n* `campaign_id`\n* `action_type` (`STAR`, `WATCH`, `FORK`, `FOLLOW_ACCOUNT`)\n* `target_repository_id` or `target_github_user_id`\n* `assigned_to_user_id` (nullable until reserved)\n* `status` (`PENDING`, `RESERVED`, `EXPIRED`, `CANCELLED`, `COMPLETED`)\n* `reward_credits`\n* `created_at`\n* `reserved_at` (when shown to user)\n* `expires_at`\n\n### 5.7. `actions` (history of actions)\n\n* `id`\n* `task_id` FK → tasks\n* `campaign_id`\n* `actor_user_id` (who did the action)\n* `target_user_id` (owner receiving action)\n* `action_type`\n* `target_repository_id` / `target_github_user_id`\n* `status` (`PENDING_VERIFICATION`, `CONFIRMED`, `REVOKED`, `DISPUTED`)\n* `verified_at`\n* `reversed_at` (if undone later)\n* `credits_earned`\n* `credits_spent`\n* `github_event_id` (if available)\n* `created_at`\n\n### 5.8. `credit_transactions`\n\n* `id`\n* `user_id`\n* `delta` (positive or negative int)\n* `balance_after`\n* `reason` (`EARN_ACTION`, `SPEND_CAMPAIGN`, `ADJUSTMENT`, `BONUS`, `PENALTY`)\n* `metadata` (JSONB)\n* `created_at`\n\n### 5.9. `block_list`\n\n* `id`\n* `user_id` (owner of block list)\n* `blocked_github_user_id` (string, nullable)\n* `blocked_repository_id` FK → repositories (nullable)\n* `reason` (text)\n* `created_at`\n\n### 5.10. `subscriptions`\n\n* `id`\n* `user_id`\n* `plan` (`FREE`, `PRO`, etc.)\n* `status` (`ACTIVE`, `CANCELLED`, `EXPIRED`)\n* `renews_at`\n* `created_at`, `updated_at`\n\n### 5.11. `audit_logs`\n\n* `id`\n* `actor_user_id` (nullable for system)\n* `action` (string)\n* `target_type` (e.g. `USER`, `CAMPAIGN`, `ACTION`)\n* `target_id`\n* `metadata` (JSONB)\n* `created_at`\n\n---\n\n## 6. Backend API Design (REST)\n\nBase: `/api/v1`.\n\n### 6.1. Auth\n\n* `POST /auth/register`\n\n  * Body: `{ email, password, display_name }`\n* `POST /auth/login`\n\n  * Body: `{ email, password }`\n  * Response: tokens + user profile.\n* `POST /auth/logout`\n* `POST /auth/refresh`\n* `GET /auth/me`\n\n  * Returns current user.\n\n### 6.2. GitHub OAuth\n\n* `GET /auth/github/url`\n\n  * Returns OAuth authorization URL.\n* `GET /auth/github/callback`\n\n  * Exchange code → token, link to user.\n* `DELETE /auth/github`\n\n  * Unlink GitHub account.\n\n### 6.3. Repositories & Campaigns\n\n* `GET /repositories`\n\n  * Query: pagination, search.\n* `POST /repositories/sync`\n\n  * Triggers sync from GitHub.\n* `GET /campaigns`\n* `POST /campaigns`\n\n  * Body:\n\n    * `type`, `repository_id` or `target_github_user_id`,\n    * `daily_credit_budget`, `total_credit_budget`, `max_actions_total`, `actions_per_user_limit`.\n* `PATCH /campaigns/:id`\n* `POST /campaigns/:id/pause`\n* `POST /campaigns/:id/resume`\n* `POST /campaigns/:id/complete`\n\n### 6.4. Tasks & Actions\n\n* `GET /tasks`\n\n  * Query:\n\n    * `type` (STAR/WATCH/FORK/FOLLOW_ACCOUNT),\n    * `limit`,\n    * filters.\n  * Server:\n\n    * Picks tasks from queue not created by this user; respects block list and per-user limits.\n* `POST /tasks/:id/reserve`\n\n  * Optional if we want explicit reservation step.\n* `POST /tasks/:id/complete`\n\n  * Backend:\n\n    * Verifies via GitHub API.\n    * On success:\n\n      * Creates `actions` record;\n      * Updates transactions & balances;\n      * Marks task completed.\n\n### 6.5. History & Block list\n\n* `GET /actions`\n\n  * Filters: direction (given/received), type, date range.\n* `GET /history/stars`, `/history/forks`, `/history/watches`, `/history/follows`\n\n  * Convenience endpoints.\n* `GET /blocks`\n* `POST /blocks`\n\n  * Body: `blocked_github_user_id` or `blocked_repository_id`.\n* `DELETE /blocks/:id`\n\n### 6.6. User settings\n\n* `GET /settings`\n* `PATCH /settings`\n\n  * Update language, timezone, etc.\n\n### 6.7. Admin\n\n* `GET /admin/users`\n* `GET /admin/users/:id`\n* `POST /admin/users/:id/ban`\n* `GET /admin/actions/suspicious`\n* `POST /admin/actions/:id/revoke`\n* etc.\n\n---\n\n## 7. Exchange & Fairness Algorithm (Detailed)\n\n### 7.1. Matching algorithm for tasks\n\nGoal: fair distribution, no obvious “star for star” pairs, avoid spam.\n\nPseudo-logic (simplified):\n\n```text\nWhen user U requests tasks for type T:\n\n1. Build candidate campaigns C:\n   - C where campaign.type == T\n   - campaign.status == ACTIVE\n   - campaign owner != U\n   - campaign has enough available credits for at least one action\n   - U is not blocked by campaign owner\n   - U has not exceeded actions_per_user_limit for this campaign\n   - U has not performed this action on this repo/account within a cooldown window\n\n2. Score each campaign c in C:\n   score(c) =\n       w1 * priority_by_plan(c.owner.subscription)\n     + w2 * log(1 + credits_remaining(c))\n     + w3 * age_factor(c.created_at)\n     + w4 * random_jitter\n\n3. Select top K campaigns.\n\n4. For each selected campaign:\n   - Create task record:\n     - reward_credits determined by campaign configuration or global rules.\n   - Insert into queue & return to client.\n```\n\n### 7.2. Credit handling\n\n* When task `t` is created:\n\n  * **Reserved debit**:\n\n    * Deduct `reward_credits` from campaign owner’s balance or mark as reserved in separate field.\n* When action is confirmed:\n\n  * **Confirm debit / credit**:\n\n    * Finalize debit from owner.\n    * Add `reward_credits` (or `reward_credits * factor`) to actor’s balance.\n    * Create `credit_transactions` rows for both.\n\n### 7.3. Anti-abuse / trust score\n\nMaintain `user_trust_score` (0–100):\n\n* Start: 100.\n* On reversal of an action within 24–48 hours:\n\n  * Decrement trust score.\n* On long periods with no reversals:\n\n  * Slowly increase back towards 100.\n* Use trust score in:\n\n  * matching (low-trust users get fewer tasks);\n  * campaign visibility;\n  * detection for admin review.\n\n### 7.4. Reversal detection\n\n* Scheduled job:\n\n  * For actions `status = CONFIRMED` and `verified_at` in last N days:\n\n    * Call GitHub API to check if star/follow/etc. still present.\n  * If missing:\n\n    * Mark `status = REVOKED`.\n    * Reverse credits:\n\n      * Deduct from actor (if available).\n      * Optionally refund owner.\n    * Increase penalty for actor.\n\n---\n\n## 8. Frontend UX / UI Specification\n\nRequirement: **modern, simple, not similar to existing GitHubStar UI**.\n\n### 8.1. General design language\n\n* Clean, card-based layout.\n* Light & dark themes.\n* Primary navigation in left sidebar.\n* Top bar:\n\n  * Profile avatar.\n  * Credit balance pill (e.g. “Credits: 1240”).\n  * Quick link to “Earn”.\n\nMain sections:\n\n1. Dashboard\n2. Earn\n3. Promote (Campaigns)\n4. History\n5. Block List\n6. Settings\n7. Admin (role-based)\n\n### 8.2. Dashboard\n\n* Tiles:\n\n  * “Credits” – current balance, delta vs yesterday.\n  * “Active campaigns” – count, actions in last 24h.\n  * “Latest activity” – recent received actions.\n* Graph:\n\n  * Actions received over last 7/30 days.\n* CTA buttons:\n\n  * “Start earning credits”.\n  * “Start a new campaign”.\n\n### 8.3. Earn page\n\n* Filter bar:\n\n  * Action type chip selector: Stars / Watches / Forks / Follows.\n  * Language dropdown (All, Python, JS, Rust, etc.).\n* Task list:\n\n  * Each row as card:\n\n    * Repo name + owner.\n    * Language + tags.\n    * Brief description.\n    * Reward (e.g. “+2 credits”).\n    * Buttons:\n\n      * `Open on GitHub` – icon + text.\n      * `Mark as done`.\n* UX flow:\n\n  * Clicking `Open on GitHub` opens new tab `https://github.com/...`.\n  * After user stars → returns and clicks `Mark as done`.\n  * Card changes to “Verifying…” then “Completed! +2 credits”.\n* Empty state:\n\n  * “No tasks right now. Try changing filters or check again later.”\n\n### 8.4. Promote (Campaigns) page\n\nTabs:\n\n1. “My campaigns”\n2. “Create campaign”\n\n#### 8.4.1. My campaigns\n\n* Table/card layout with columns:\n\n  * Campaign name.\n  * Type (star/fork/watch/follow).\n  * Target (repo/account).\n  * Status.\n  * Today: actions received.\n  * Total: credits spent / actions.\n* Each row: quick actions:\n\n  * Pause/resume toggle.\n  * Edit.\n  * View details.\n\n#### 8.4.2. Create campaign wizard\n\nStep 1: Choose what you want:\n\n* [ ] Get more stars for my repo.\n* [ ] Get more forks for my repo.\n* [ ] Get more watchers for my repo.\n* [ ] Get more followers for my GitHub account.\n\nStep 2: Select target:\n\n* Dropdown of imported repos or “My GitHub account”.\n\nStep 3: Configure budget:\n\n* Slider for daily budget (credits).\n* Input for max total actions.\n* Per-user limit (default 1).\n\nStep 4: Review & create:\n\n* Summary card:\n\n  * “You’ll spend up to X credits/day, estimated ~Y actions/day”.\n* “Create campaign” button.\n\n### 8.5. History page\n\n* Tabbed:\n\n  * Stars\n  * Watches\n  * Forks\n  * Follows\n  * All actions\n\n* Each tab: data table:\n\n  * Date/time.\n  * Direction (given/received).\n  * Peer (user/repo).\n  * Action type.\n  * Credits earned/spent.\n  * Status (confirmed, revoked).\n\n* Filters:\n\n  * Date range picker.\n  * Direction.\n  * Repo.\n\n* Export button.\n\n### 8.6. Block List page\n\n* List of blocked entities:\n\n  * Type: User / Repo.\n  * Name.\n  * Reason.\n  * Date.\n\n* “Add block” dialog:\n\n  * Input: GitHub username or repo full name.\n  * Helper: search as user types (via GitHub API).\n\n### 8.7. Settings\n\n* Profile:\n\n  * Display name, avatar preview.\n* GitHub connection:\n\n  * Status: Connected/Not connected.\n  * “Connect GitHub account” / “Reconnect”.\n* Preferences:\n\n  * Preferred UI language.\n  * Timezone.\n  * Default task types to show.\n* Notifications:\n\n  * On/off toggles for email digests.\n\n---\n\n## 9. Background Jobs & Schedules\n\n### 9.1. Queue processing\n\nUse Redis-backed queue (e.g. BullMQ):\n\n* `verify-action` queue:\n\n  * Worker concurrency ~5–20.\n* `campaign-scheduler` queue:\n\n  * Periodic job (every minute) to generate tasks for active campaigns.\n* `sync-repositories` queue:\n\n  * Nightly job per user.\n\n### 9.2. Cron jobs\n\n* Every 5 minutes:\n\n  * Process pending verifications.\n* Every hour:\n\n  * Recalculate trust scores.\n* Nightly:\n\n  * Full sync of repo stats.\n  * Backup / maintenance tasks.\n\nOn Render, these can be implemented as:\n\n* Worker service with `cron` package or Render “cron job” services hitting dedicated endpoints.\n\n---\n\n## 10. Deployment Plan on Render\n\nRender supports web services, Postgres, and Key-Value/Redis-like services suitable for this architecture. ([Render][4])\n\n### 10.1. Repositories\n\n* Single mono-repo (e.g. `github-star-exchange`):\n\n  * `backend/` – Node.js + NestJS.\n  * `frontend/` – React + Vite/Next.\n  * `Dockerfile` – multi-stage build (or separate Dockerfiles per service).\n\n### 10.2. Datastores\n\n1. **Render Postgres**\n\n   * Create via Render → New → Postgres.\n   * Choose region (e.g. Frankfurt) and instance size.\n   * Configure:\n\n     * `DATABASE_URL` env var for backend & worker (internal URL). ([Render][2])\n\n2. **Redis / Key Value**\n\n   * If using Redis:\n\n     * New → Redis (or generic Key Value) via documentation. ([Render][3])\n     * Configure `REDIS_URL`.\n\n### 10.3. Web service (API + Frontend)\n\nOption A: Single web service with Node backend serving both API and built frontend.\n\n* On Render:\n\n  * New → Web Service.\n  * Source: Git repository.\n  * Language: Node.\n  * Build command:\n\n    * `cd frontend && npm ci && npm run build`\n    * `cd ../backend && npm ci && npm run build`\n  * Start command:\n\n    * `cd backend && node dist/main.js`\n  * Environment variables:\n\n    * `PORT=10000` (or default).\n    * `DATABASE_URL`, `REDIS_URL`.\n    * `GRUHUB_CLIENT_ID`, `GRUHUB_CLIENT_SECRET`, `GRUHUB_OAUTH_REDIRECT_URL`.\n    * `JWT_SECRET`, `ENCRYPTION_KEY`.\n\nOption B: Separate services for API and static frontend:\n\n* Frontend:\n\n  * Use Render Static Site.\n  * Build output from `frontend/`.\n* Backend:\n\n  * Web Service with Node.\n\n### 10.4. Worker service\n\n* Another Render **Web Service** (or “Background Worker” if available) using same repo:\n\n  * Language: Node or Docker.\n  * Build command: same as backend.\n  * Start command: `cd backend && node dist/worker.js` (worker entry).\n  * Attach same `DATABASE_URL`, `REDIS_URL`.\n\n### 10.5. Auto-deploys & environments\n\nRender supports auto-deploy from Git providers. ([Render][5])\n\n* Production:\n\n  * Branch: `main`.\n  * Auto-deploy on commit.\n* Staging:\n\n  * Branch: `develop` or `staging`.\n* Environment-specific:\n\n  * Separate Postgres & Redis per environment.\n\n### 10.6. Monitoring & logs\n\n* Use Render logs for basic monitoring.\n* Add lightweight metrics endpoint `/metrics` (Prometheus style) and connect to external monitoring if needed.\n\n---\n\n## 11. Security & Compliance Considerations\n\n* Sensitive data (GitHub tokens) stored encrypted.\n* Rate-limit on login endpoints.\n* CSRF protection for browser-based flows; recommend same-site cookies or CSRF tokens.\n* Strict CORS.\n* Minimal GitHub scopes; revoke on unlink.\n\n---\n\n## 12. Future Extensions (Optional)\n\n* Webhooks from GitHub (if available) for real-time verification.\n* Mobile-friendly PWA with push notifications.\n* Advanced targeting:\n\n  * filter by repo topics, stars range.\n* Social features:\n\n  * “Mutual promotion groups,” chat, etc.\n\n---\n\nThis specification covers:\n\n* full feature set patterned on GitHubStar (stars/follows/forks/watches, history, block list, premium); ([GitHub Star][1])\n* GitHub OAuth and API integration;\n* multi-user system with credits and campaigns;\n* complete data model and backend API;\n* modern UX/UI concept clearly distinct from the original site;\n* and explicit deployment plan on Render for web service, worker, Postgres, and Redis.\n\n[1]: https://www.githubstar.com/ \"GitHub Star Exchange - Quickly Gain Stars – GITHUBSTAR\"\n[2]: https://render.com/docs/postgresql-creating-connecting \"Create and Connect to Render Postgres\"\n[3]: https://render.com/docs/deploy-webdis-docker \"Deploy Webdis and Redis with Docker\"\n[4]: https://render.com/docs/web-services \"Web Services\"\n[5]: https://render.com/docs/deploys \"Deploying on Render\"\n",
  "timestamp": "2025-11-27T10:55:33.107Z",
  "quality": {
    "relevance": 0.7166666666666667,
    "coverage": 0.5916666666666667,
    "confidence": 0.775,
    "support": 0.7333333333333334,
    "recency": 0.7833333333333332,
    "diversity": 0.7083333333333334,
    "hasConflicts": false,
    "shouldRetry": false,
    "reasons": "Findings partially cover basic GitHub OAuth implementation in Node.js (code exchange, profile fetch) but lack depth on PKCE flow, token refresh/encryption, and JWT session best practices required by goal. Sources are mostly blogs/forums, not official docs; low coverage of full spec needs like secure storage and sessions.; Findings directly confirm fork endpoint (POST /repos/{owner}/{repo}/forks) and follow endpoint (PUT /user/following/{username}), with support for checking follow status; highlight gap in direct check for user-specific fork status, addressing key GitHub API needs for actions/verification in spec. Official GitHub Docs provide high confidence/support; covers queried aspects but subset of full goal APIs (e.g., misses star/watch details); recent authoritative sources, low diversity.; Findings directly address Node.js exponential backoff for GitHub API rate limiting (spec 2.2.3), with libraries like node-backoff and implementation examples; strong relevance and support but partial coverage of counters/cooldowns, mixed recency.; Findings are generic SaaS Postgres examples (templates, multi-tenancy, billing) but do not provide specific schema designs or examples matching the detailed tables in the goal (users, oauth_accounts, github_profiles, repositories, campaigns, tasks, actions, credit_transactions, block_list). No direct relevance to GitHub-integrated SaaS schema for campaigns/tasks/actions; low coverage of required entities.; Findings provide general BullMQ setup and basics (queues, jobs, Redis integration) relevant to spec's background jobs (e.g., verify-action, campaign-scheduler), but lack specifics on pairing givers/receivers, credit handling, exchange job logic, or matching algorithm integration; generic intros not deeply tied to goal's custom needs.; Findings directly address spec's requirement to encrypt GitHub OAuth tokens at rest using application-level AES-GCM in Node.js for PostgreSQL storage, with code examples for crypto module, IV/authTag handling, PBKDF2 key derivation, and DB-friendly formats. Strong practical coverage but lacks KMS details; sources are reputable gists citing standards, no conflicts.",
    "lastQuery": "GitHub OAuth2 PKCE implementation Node.js JWT sessions best practices, GitHub REST API fork repository endpoint POST /repos/{owner}/{repo}/forks check if user forked follow user PUT /user/following/{username} check following, GitHub API rate limiting exponential backoff handling Node.js libraries, PostgreSQL database schema design examples SaaS users repositories campaigns tasks actions credit_transactions oauth, Node.js background jobs BullMQ pairing givers receivers queue credits, Encrypt store GitHub OAuth tokens Node.js AES-GCM PostgreSQL KMS",
    "attemptCount": 6
  },
  "rawSearchResults": [
    {
      "url": "https://www.reddit.com/r/node/comments/1mx55i2/still_working_on_an_oauth2pkce_implementation/",
      "title": "Still working on an OAuth2/PKCE implementation. : r/node - Reddit",
      "snippet": "I built a JWT-based authentication and user authorization system with password/email registration, time-limited OTPs, refresh-token logic,",
      "source": "tavily"
    },
    {
      "url": "https://www.loginradius.com/blog/engineering/oauth-implemenation-using-node",
      "title": "Implement OAuth Using Node.js & GitHub - LoginRadius",
      "snippet": "Creating a Web Application using DenoHello world with DenoFacebook authentication using NodeJS and PassportJSStackExchange - The 8 best resources every developer must followOAuth implementation with Node.js and GithubNodeJS and MongoDB application authentication by JWTWorking with AWS Lambda and SQSGoogle OAuth2 Authentication in NodeJS - A Guide to Implementing OAuth in Node.jsCustom Encoders in the Mongo Go DriverReact's Reconciliation AlgorithmNaN in JavaScript: An Essential GuideSDK Version 10.0.0Getting Started with gRPC - Part 1 ConceptsIntroduction to Cross-Site Request Forgery (CSRF)Introduction to Web Accessibility with Semantic HTML5JavaScript Events: Bubbling, Capturing, and Propagation3 Simple Ways to Secure Your Websites/ApplicationsFailover Systems and LoginRadius' 99.99% UptimeA Bot Protection OverviewOAuth 1.0 VS OAuth 2.0Azure AD as an Identity providerHow to Use JWT with OAuthLet's Encrypt with SSL CertificatesEncryption, Hashing & Salting: Your Guide to Secure DataWhat is JSON Web TokenUnderstanding JSONPUsing NuGet to publish .NET packagesHow to configure the 'Actions on Google' console for Google AssistantCreating a Google Hangout Bot with Express and Node.jsUnderstanding End Of Line: The Power of Newline CharactersCocoapods : What It Is And How To Install?",
      "source": "tavily"
    },
    {
      "url": "https://blog.fmendes.dev/oauth-20-integration-and-session-handling-with-nodejs",
      "title": "OAuth 2.0 Integration and Session Handling with Node.js",
      "snippet": "A quick guide to using OAuth 2.0 and managing user logins.",
      "source": "tavily"
    },
    {
      "url": "https://codevoweb.com/how-to-implement-github-oauth-in-nodejs/",
      "title": "How to Implement GitHub OAuth in Node.js 2025 - CodevoWeb",
      "snippet": "In this tutorial, I'll walk you through the process of integrating GitHub OAuth into a Node.js application, including setting up the OAuth",
      "source": "tavily"
    },
    {
      "url": "https://stackoverflow.com/questions/71504664/implementing-pkce-for-authorizing-backend-requests-with-oauth",
      "title": "Implementing PKCE for Authorizing Backend Requests with OAuth",
      "snippet": "PKCE is designed to ensure the token is granted to the same entity that requested the auth code, in order to prevent attackers from using stolen auth codes.",
      "source": "tavily"
    }
  ],
  "rawPagesSample": [
    {
      "url": "https://www.reddit.com/r/node/comments/1mx55i2/still_working_on_an_oauth2pkce_implementation/",
      "content": "Skip to main content Open menu Open navigation Go to Reddit Home r/node A chip A close button Log In Log in to Reddit Expand user menu Open settings menu Go to node r/node • ocakodot Françaisहिन्दीРусскийPortuguês (Brasil)Deutsch Still working on an OAuth2/PKCE implementation. I built a JWT-based authentication and user authorization system with password/email registration, time-limited OTPs, refresh-token logic, and session management. I followed OWASP best practices. I self-hosted the API and database on a Raspberry Pi and exposed them to the public via a tunnel. Cloudflare acts as a reverse proxy and modified authentication headers, which caused Google redirect_uri mismatches, so I couldn’t get the OAuth2 PKCE flow to work in production. I inspected headers on server , but because TLS was terminated at the proxy I couldn’t see the original headers. It is also not possible to decrypt TLS as much as I know. I ended up shelving the issue , though I return to it occasionally and still haven’t found a reliable solution. Open to suggestions or pointers. Read more Share New to Reddit? Create your account and connect with a world of communities. Continue with Email By continuing, you agree to our User Agreement and acknowledge that you understand the Privacy Policy. Public Anyone can view, post, and comment to this community 0 0 Reddit Rules Privacy Policy User Agreement Accessibility Reddit, Inc. © 2025. All rights reserved. Expand Navigation Collapse Navigation"
    },
    {
      "url": "https://www.loginradius.com/blog/engineering/oauth-implemenation-using-node",
      "content": "2024 KuppingerCole Leadership Compass recognizes LoginRadius as Overall Leader.Get Report Login Products Solutions Customers Developers Resources Pricing Free Trial Contact Sales Products Solutions Customers Developers Resources Pricing OAuth implementation with Node.js and Github OauthNodeJs Puneet SinghFirst published: 2020-03-22Last updated: 2025-06-25 Learn How to Master Digital Trust Explore The Book The State of Consumer Digital ID 2024 Learn More Top CIAM Platform 2024 Learn More In this blog, we’ll be implementing OAuth by Github in a Node.js Application Before You Get Started This tutorial assumes you have: Basic knowledge of HTML/CSS Basic understanding of OAuth A good understanding of JavaScript and Node.js Latest Node.js version installed on your system Step 1: Register a Github OAuth App To implement Github Auth we need to register a new application in Github OAuth Apps. Once you start the process you will get a form like this. You need to fill all the required details and put the Authorization callback URL as http://localhost:2400/github/callback (This will be the URL on which Github will send the authorization code once authorization is finished) Once you register the application you will get the App's Client Id and Secret which we will use in our code. Step 2: Initialize a node.js project with all the dependencies First in an empty folder run the below command Copy1npm init It essentially just creates the package.json file with all the basic information you will provide. after that, we will install all the dependencies needed in our project express: Node.js framework to create a server and accept requests ejs: To render HTML pages for login and profile axios: Use the Axios library, to make HTTP requests Copy1npm install express ejs axios --save Step 3: Writing express server code to accept web requests Create a file index.js in the root folder of your app and add the following code: Copy1// index.js 2/* EXPRESS */ 3const express = require('express'); 4const app = express(); 5app.set('view engine', 'ejs'); 6var access_token = \"\"; 7app.get('/', function(req, res) { 8res.render('pages/index',{client_id: clientID}); 9}); 10const port = process.env.PORT || 2400; 11app.listen(port , () => console.log('App listening on port ' + port)); Our web server has been set up, now we will add the code related to sending the OAuth request to GitHub using Axios package, at the bottom of the index.js file: Copy1// index.js 2// Import the axios library, to make HTTP requests 3const axios = require('axios') 4// This is the client ID and client secret that you obtained 5// while registering on github app 6const clientID = 'xxxxxxxxxxxx' 7const clientSecret = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxx' 8// Declare the callback route 9app.get('/github/callback', (req, res) => { 10// The req.query object has the query params that were sent to this route. 11const requestToken = req.query.code 12axios({ 13method: 'post', 14url: https://github.com/login/oauth/access_token?client_id=${clientID}&#x26;client_secret=${clientSecret}&#x26;code=${requestToken}, 15// Set the content type header, so that we get the response in JSON 16headers: { 17accept: 'application/json' 18} 19}).then((response) => { 20access_token = response.data.access_token 21res.redirect('/success'); 22}) 23}) 24app.get('/success', function(req, res) { 25axios({ 26method: 'get', 27url: https://api.github.com/user, 28headers: { 29Authorization: 'token ' + access_token 30} 31}).then((response) => { 32res.render('pages/success',{ userData: response.data }); 33}) 34}); Note: The callback URL should be the same as used in the GitHub app configuration. Step 4: Creating a Login and Profile page Create an ejs file under path views/pages/index.js, it will render into a nice looking Github authorization page: Copy1<!-- views/index.ejs --> 2<!doctype html> 3<html> 4<head> 5 <title>Github OAuth</title> 6 <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.mi"
    },
    {
      "url": "https://blog.fmendes.dev/oauth-20-integration-and-session-handling-with-nodejs",
      "content": "Francisco Mendes Follow Francisco Mendes Follow OAuth 2.0 Integration and Session Handling with Node.js A quick guide to using OAuth 2.0 and managing user logins Francisco Mendes ·Jun 7, 2025 Table of contents Before We Dive In Behind the Curtain Wiring Up the Back-end End Note If you have ever logged into a platform using a provider, you have likely experienced the OAuth flow, whether it was with Google, Facebook, GitHub, or others. For us as users, it's a convenient process because we don't need to remember a new password, check our email to confirm a new account, or worry about forgetting the password and having to go through the whole verification process again. In my experience, this topic often confuses people and leads to misunderstandings. It's important to clarify that OAuth is an authorization protocol, not an authentication protocol. When discussing user identity, there's another layer called OpenID Connect (OIDC) that provides single sign-on across multiple sites. When you need to log in to a site using OIDC, you're redirected to your OpenID site to sign in, and then you're taken back to the original site. It's crucial to make this distinction because they serve different purposes. Before We Dive In First, we need to prepare the basics that outline how the API we want to integrate will work. We typically need two endpoints: one to handle the authorization process and another for the callback that receives the authorization code after the user grants access. This code is then exchanged for an access token to complete the OAuth flow. Regarding authorization, this is often referred to as consent. It's important to note that not all providers offer OIDC. Therefore, we need to pay attention to the details in the technical specifications. Providers that only offer OAuth 2.0 let users grant access to their resources. During this process, we get an Access Token, which we use to access APIs on behalf of the user. However, we don't know the user's identity. To get this information, we need to include it in the scopes and make a separate HTTP request to retrieve the data. With OIDC, we include OpenID in the authorization scope, and we receive an ID Token. This token is a JWT that, after decoding, contains claims like name, gender, sub, and email, which identify the user. To set it up, we need to register the application on the provider's developer portal. You must obtain application-specific credentials, such as the client id and client secret (or others), and register a callback/redirect URI to maintain the flow's integrity. When it comes to the API, there are different ways to generate tokens and manage the application session. Generally, I handle these on the server side, storing them in a database or an in-memory data store. This is where we take control, deciding what data to keep, what session invalidation methods to use, and everything else related to session management. In this article, we won't build everything from scratch, but we also won't use all-in-one solutions. We'll use primitives provided by packages like Oslo and Arctic to simplify some of the complex parts. Behind the Curtain Lately, I've been learning more about databases and have become particularly interested in SQLite. However, there's a catch: SQLite lacks some features that can be added by installing extensions like sqlean, setting up WAL mode, replication, and a server mode accessible via HTTP. Because of this, I decided to use libSQL. If you’re interested, here is the link to view the Docker Compose file. For this article, I simplified the database schema as much as possible to provide a clear example. I decided to create three tables: users, accounts, and sessions. The users table stores basic information about each user. The accounts table stores each provider associated with the users. The sessions table represents each user's active sessions. These relationships are one-to-many. The id column in the sessions table serves as the session token an"
    },
    {
      "url": "https://docs.github.com/en/rest/users",
      "content": "Skip to main content GitHub DocsVersion: Free, Pro, & Team Search or ask CopilotSearch or askCopilot Select language: current language is English Search or ask CopilotSearch or askCopilot Open menu Open Sidebar REST API/ Users Home REST API API Version: 2022-11-28 (latest) Quickstart About the REST APIAbout the REST API Comparing GitHub's APIs API Versions Breaking changes OpenAPI description Using the REST APIGetting started Rate limits Pagination Libraries Best practices Troubleshooting Timezones CORS and JSONP Issue event types GitHub event types AuthenticationAuthenticating Keeping API credentials secure Endpoints for GitHub App installation tokens Endpoints for GitHub App user tokens Endpoints for fine-grained PATs Permissions for GitHub Apps Permissions for fine-grained PATs GuidesScript with JavaScript Script with Ruby Discover resources for a user Delivering deployments Rendering data as graphs Working with comments Building a CI server Get started - Git database Get started - Checks Encrypt secrets ActionsArtifacts Cache GitHub-hosted runners OIDC Permissions Secrets Self-hosted runner groups Self-hosted runners Variables Workflow jobs Workflow runs Workflows ActivityEvents Feeds Notifications Starring Watching AppsGitHub Apps Installations Marketplace OAuth authorizations Webhooks BillingBudgets Billing usage BranchesBranches Protected branches CampaignsSecurity campaigns ChecksCheck runs Check suites ClassroomClassroom Code scanningCode scanning Code security settingsConfigurations Codes of conductCodes of conduct CodespacesCodespaces Organizations Organization secrets Machines Repository secrets User secrets CollaboratorsCollaborators Invitations CommitsCommits Commit comments Commit statuses CopilotCopilot metrics Copilot user management CredentialsRevocation DependabotAlerts Repository access Secrets Dependency graphDependency review Dependency submission Software bill of materials (SBOM) Deploy keysDeploy keys DeploymentsDeployment branch policies Deployments Environments Protection rules Deployment statuses EmojisEmojis Enterprise teamsEnterprise team members Enterprise team organizations Enterprise teams GistsGists Comments Git databaseBlobs Commits References Tags Trees GitignoreGitignore InteractionsOrganization Repository User IssuesAssignees Comments Events Issues Issue dependencies Labels Milestones Sub-issues Timeline LicensesLicenses MarkdownMarkdown MetaMeta MetricsCommunity Statistics Traffic MigrationsOrganizations Source endpoints Users ModelsCatalog Embeddings Inference OrganizationsAPI Insights Artifact metadata Artifact attestations Blocking users Custom properties Custom properties for organizations Issue types Members Network configurations Organization roles Organizations Outside collaborators Personal access tokens Rule suites Rules Security managers Webhooks PackagesPackages PagesPages Private registriesOrganization configurations ProjectsDraft Project items Project fields Project items Projects Projects (classic)Collaborators Columns Pull requestsPull requests Review comments Review requests Reviews Rate limitRate limit ReactionsReactions ReleasesReleases Release assets RepositoriesAutolinks Contents Custom properties Forks Repositories Rule suites Rules Tags Webhooks SearchSearch Secret scanningPush protection Secret scanning Security advisoriesGlobal security advisories Repository security advisories TeamsTeams Discussion comments Discussions Members UsersAttestations Blocking users Emails Followers GPG keys Git SSH keys Social accounts SSH signing keys Users The REST API is now versioned. For more information, see \"About API versioning.\" REST API/ Users REST API endpoints for users Use the REST API to get public and private information about authenticated users. REST API endpoints for usersGet the authenticated user Update the authenticated user Get a user using their ID List users Get a user Get contextual information for a user REST API endpoints for artifact attestationsList attestati"
    },
    {
      "url": "https://docs.github.com/en/rest/repos/repos",
      "content": "Skip to main content GitHub DocsVersion: Free, Pro, & Team Search or ask CopilotSearch or askCopilot Select language: current language is English Search or ask CopilotSearch or askCopilot Open menu Open Sidebar REST API/ Repositories/ Repositories Home REST API API Version: 2022-11-28 (latest) Quickstart About the REST APIAbout the REST API Comparing GitHub's APIs API Versions Breaking changes OpenAPI description Using the REST APIGetting started Rate limits Pagination Libraries Best practices Troubleshooting Timezones CORS and JSONP Issue event types GitHub event types AuthenticationAuthenticating Keeping API credentials secure Endpoints for GitHub App installation tokens Endpoints for GitHub App user tokens Endpoints for fine-grained PATs Permissions for GitHub Apps Permissions for fine-grained PATs GuidesScript with JavaScript Script with Ruby Discover resources for a user Delivering deployments Rendering data as graphs Working with comments Building a CI server Get started - Git database Get started - Checks Encrypt secrets ActionsArtifacts Cache GitHub-hosted runners OIDC Permissions Secrets Self-hosted runner groups Self-hosted runners Variables Workflow jobs Workflow runs Workflows ActivityEvents Feeds Notifications Starring Watching AppsGitHub Apps Installations Marketplace OAuth authorizations Webhooks BillingBudgets Billing usage BranchesBranches Protected branches CampaignsSecurity campaigns ChecksCheck runs Check suites ClassroomClassroom Code scanningCode scanning Code security settingsConfigurations Codes of conductCodes of conduct CodespacesCodespaces Organizations Organization secrets Machines Repository secrets User secrets CollaboratorsCollaborators Invitations CommitsCommits Commit comments Commit statuses CopilotCopilot metrics Copilot user management CredentialsRevocation DependabotAlerts Repository access Secrets Dependency graphDependency review Dependency submission Software bill of materials (SBOM) Deploy keysDeploy keys DeploymentsDeployment branch policies Deployments Environments Protection rules Deployment statuses EmojisEmojis Enterprise teamsEnterprise team members Enterprise team organizations Enterprise teams GistsGists Comments Git databaseBlobs Commits References Tags Trees GitignoreGitignore InteractionsOrganization Repository User IssuesAssignees Comments Events Issues Issue dependencies Labels Milestones Sub-issues Timeline LicensesLicenses MarkdownMarkdown MetaMeta MetricsCommunity Statistics Traffic MigrationsOrganizations Source endpoints Users ModelsCatalog Embeddings Inference OrganizationsAPI Insights Artifact metadata Artifact attestations Blocking users Custom properties Custom properties for organizations Issue types Members Network configurations Organization roles Organizations Outside collaborators Personal access tokens Rule suites Rules Security managers Webhooks PackagesPackages PagesPages Private registriesOrganization configurations ProjectsDraft Project items Project fields Project items Projects Projects (classic)Collaborators Columns Pull requestsPull requests Review comments Review requests Reviews Rate limitRate limit ReactionsReactions ReleasesReleases Release assets RepositoriesAutolinks Contents Custom properties Forks RepositoriesList organization repositories Create an organization repository Get a repository Update a repository Delete a repository List repository activities Create an attestation List attestations Check if Dependabot security updates are enabled for a repository Enable Dependabot security updates Disable Dependabot security updates List CODEOWNERS errors List repository contributors Create a repository dispatch event Check if immutable releases are enabled for a repository Enable immutable releases Disable immutable releases List repository languages Check if private vulnerability reporting is enabled for a repository Enable private vulnerability reporting for a repository Disable private vulnerability reporting for a repository List repository t"
    },
    {
      "url": "https://docs.github.com/en/rest/users/users",
      "content": "Skip to main content GitHub DocsVersion: Free, Pro, & Team Search or ask CopilotSearch or askCopilot Select language: current language is English Search or ask CopilotSearch or askCopilot Open menu Open Sidebar REST API/ Users/ Users Home REST API API Version: 2022-11-28 (latest) Quickstart About the REST APIAbout the REST API Comparing GitHub's APIs API Versions Breaking changes OpenAPI description Using the REST APIGetting started Rate limits Pagination Libraries Best practices Troubleshooting Timezones CORS and JSONP Issue event types GitHub event types AuthenticationAuthenticating Keeping API credentials secure Endpoints for GitHub App installation tokens Endpoints for GitHub App user tokens Endpoints for fine-grained PATs Permissions for GitHub Apps Permissions for fine-grained PATs GuidesScript with JavaScript Script with Ruby Discover resources for a user Delivering deployments Rendering data as graphs Working with comments Building a CI server Get started - Git database Get started - Checks Encrypt secrets ActionsArtifacts Cache GitHub-hosted runners OIDC Permissions Secrets Self-hosted runner groups Self-hosted runners Variables Workflow jobs Workflow runs Workflows ActivityEvents Feeds Notifications Starring Watching AppsGitHub Apps Installations Marketplace OAuth authorizations Webhooks BillingBudgets Billing usage BranchesBranches Protected branches CampaignsSecurity campaigns ChecksCheck runs Check suites ClassroomClassroom Code scanningCode scanning Code security settingsConfigurations Codes of conductCodes of conduct CodespacesCodespaces Organizations Organization secrets Machines Repository secrets User secrets CollaboratorsCollaborators Invitations CommitsCommits Commit comments Commit statuses CopilotCopilot metrics Copilot user management CredentialsRevocation DependabotAlerts Repository access Secrets Dependency graphDependency review Dependency submission Software bill of materials (SBOM) Deploy keysDeploy keys DeploymentsDeployment branch policies Deployments Environments Protection rules Deployment statuses EmojisEmojis Enterprise teamsEnterprise team members Enterprise team organizations Enterprise teams GistsGists Comments Git databaseBlobs Commits References Tags Trees GitignoreGitignore InteractionsOrganization Repository User IssuesAssignees Comments Events Issues Issue dependencies Labels Milestones Sub-issues Timeline LicensesLicenses MarkdownMarkdown MetaMeta MetricsCommunity Statistics Traffic MigrationsOrganizations Source endpoints Users ModelsCatalog Embeddings Inference OrganizationsAPI Insights Artifact metadata Artifact attestations Blocking users Custom properties Custom properties for organizations Issue types Members Network configurations Organization roles Organizations Outside collaborators Personal access tokens Rule suites Rules Security managers Webhooks PackagesPackages PagesPages Private registriesOrganization configurations ProjectsDraft Project items Project fields Project items Projects Projects (classic)Collaborators Columns Pull requestsPull requests Review comments Review requests Reviews Rate limitRate limit ReactionsReactions ReleasesReleases Release assets RepositoriesAutolinks Contents Custom properties Forks Repositories Rule suites Rules Tags Webhooks SearchSearch Secret scanningPush protection Secret scanning Security advisoriesGlobal security advisories Repository security advisories TeamsTeams Discussion comments Discussions Members UsersAttestations Blocking users Emails Followers GPG keys Git SSH keys Social accounts SSH signing keys UsersGet the authenticated user Update the authenticated user Get a user using their ID List users Get a user Get contextual information for a user The REST API is now versioned. For more information, see \"About API versioning.\" REST API/ Users/ Users REST API endpoints for users Use the REST API to get public and private information about authenticated users. Get the authenticated user OAuth app tokens and personal access tokens (c"
    },
    {
      "url": "https://github.com/MathieuTurcotte/node-backoff",
      "content": "Skip to content Navigation Menu Toggle navigation Sign in Appearance settings Platform GitHub Copilot Write better code with AI GitHub Spark New Build and deploy intelligent apps GitHub Models New Manage and compare prompts GitHub Advanced Security Find and fix vulnerabilities Actions Automate any workflow Codespaces Instant dev environments Issues Plan and track work Code Review Manage code changes Discussions Collaborate outside of code Code Search Find more, search less Explore Why GitHub Documentation GitHub Skills Blog Integrations GitHub Marketplace MCP Registry View all features Solutions By company size Enterprises Small and medium teams Startups Nonprofits By use case App Modernization DevSecOps DevOps CI/CD View all use cases By industry Healthcare Financial services Manufacturing Government View all industries View all solutions Resources Topics AI DevOps Security Software Development View all Explore Learning Pathways Events & Webinars Ebooks & Whitepapers Customer Stories Partners Executive Insights Open Source GitHub Sponsors Fund open source developers The ReadME Project GitHub community articles Repositories Topics Trending Collections Enterprise Enterprise platform AI-powered developer platform Available add-ons GitHub Advanced Security Enterprise-grade security features Copilot for business Enterprise-grade AI features Premium Support Enterprise-grade 24/7 support Pricing Search or jump to... Search code, repositories, users, issues, pull requests... Search Clear Search syntax tips Provide feedback We read every piece of feedback, and take your input very seriously. Include my email address so I can be contacted Cancel Submit feedback Saved searches Use saved searches to filter your results more quickly Name Query To see all available qualifiers, see our documentation. Cancel Create saved search Sign in Sign up Appearance settings Resetting focus You signed in with another tab or window. Reload to refresh your session. You signed out in another tab or window. Reload to refresh your session. You switched accounts on another tab or window. Reload to refresh your session. Dismiss alert {{ message }} MathieuTurcotte / node-backoff Public Notifications You must be signed in to change notification settings Fork 35 Star 338 Fibonacci and exponential backoff for Node.js License MIT license 338 stars 35 forks Branches Tags Activity Star Notifications You must be signed in to change notification settings Code Issues 7 Pull requests 4 Actions Projects 0 Wiki Security Uh oh! There was an error while loading. Please reload this page. Insights Additional navigation options Code Issues Pull requests Actions Projects Wiki Security Insights MathieuTurcotte/node-backoff master BranchesTags Go to file CodeOpen more actions menu Folders and files NameNameLast commit message Last commit date Latest commit History 179 Commits docs docs examples examples lib lib tests tests .gitignore .gitignore .jshintrc .jshintrc .travis.yml .travis.yml CHANGES.md CHANGES.md LICENSE LICENSE README.md README.md index.js index.js package.json package.json View all files Repository files navigation README MIT license Backoff for Node.js Fibonacci and exponential backoffs for Node.js. Installation npm install backoff Unit tests npm test Usage Object Oriented The usual way to instantiate a new Backoff object is to use one predefined factory method: backoff.fibonacci([options]), backoff.exponential([options]). Backoff inherits from EventEmitter. When a backoff starts, a backoff event is emitted and, when a backoff ends, a ready event is emitted. Handlers for these two events are called with the current backoff number and delay. var backoff = require('backoff'); var fibonacciBackoff = backoff.fibonacci({ randomisationFactor: 0, initialDelay: 10, maxDelay: 300 }); fibonacciBackoff.failAfter(10); fibonacciBackoff.on('backoff', function(number, delay) { // Do something when backoff starts, e.g. show to the // user the delay before next reconnection attempt"
    },
    {
      "url": "https://ramblings.mcpher.com/gassnippets2/using-exponential-backoff-with-github-api-dealing-with-data-in-preparation/",
      "content": "Search for: Desktop liberation The definitive resource for Google Workspace and Cloud automation Home About Desktop Liberation Reusing code from this site My Public GAS Library Privacy and Usage Policy Blog Access all published posts Downloads APIS Google API Slides Chrome Docs Drive Execution KnowledgeGraph People Sheets Microsoft API OneDrive REST Video Intelligence Vimeo Vision Apps Script & Java Script Apps Script v8 Add-ons Javascript From VBA to Google Apps Script Office JavaScript API Snippets Cloud Platform BigQuery Cloud Functions Firebase Kubernetes Google Cloud Platform Google Cloud Storage Databases BigQuery CockroachDB Database abstraction Elastic Firebase GraphQL Office & VBA From VBA to Google Apps Script Optimization Elastic Full Stack GraphQL Kubernetes Node.js Redis-Vue.JS LinkedIn Github HomeGoogle Apps Script snippetsUsing exponential backoff with github api – dealing with data “in preparation” Using exponential backoff with github api – dealing with data “in preparation” Some of the responses from the GitHub API rely on the answers being in its cache. If you make a request and there is no available cache result, it returns an HTTP code (202) to let you know that you need to check back later (not very much later, but shortly). This is pretty standard and quite a few APIS work this way. In Apps Script, one way would be to sleep for a while, and try again until you get a 200 code (or some failure), which means the data is ready. A better way is to use exponential backoff, which will wait increasingly longer periods of time and finally give up. Exponential backoff is usually used for dealing with rate limiting, and of course the GitHub API also has rate limiting, so it’s ideal to use it for both purposes. You’ll find a write up on my exponential backoff here Custom checking for exponential backoff, along with where to get it. Page Content hide 1 Custom checking with exponential backoff 2 GitHub API 3 How to get commit data 4 Share with your network Custom checking with exponential backoff One of the options to exponential backoff is a lookahead function. Here’s a simple example to detect a rate limit error for an API that signals such an error in its JSON response (as opposed to via an HTTP code). The lookahead functions return true if it recognizes the response as a rate limit error, and false if it doesn’t recognize the response var response = cUseful.Utils.expBackoff ( function () { return UrlFetchApp.fetch(url , { muteHttpExceptions:true, }); }, { lookahead:function (response,attempt) { // the api doesnt fail on rate limiting in any case // so we need to parse the content (if parseable) try { var r = JSON.parse(response.getContentText()); return r && r.error && r.error.indexOf('code: 429') !== -1; } catch(err) { return false; } } GitHub API Some of the requests to the github API (for example commit information), returns a 202 while it is preparing a response and its up to you to keep trying till you get a 200 or some error. In my main scripts, I can’t be bothered to worry about this so I’ve built it into the library I use for GitHub access and can simply forget all about it. The github API is a little more complex that this as there is pagination to deal with, along with reading information from the response headers, so for my bulk github/apps script implementation, Getting your apps scripts to Github, I use my library cGitJsonAPI which knows how to deal with all of that 1_4RfsIW57fdzWh7T38O9IfGdTRgYbOSyC5PvsOm3a4GU1sxllw8blEUl along with cUrlResult which uses exponential backoff behind the scenes 1NtAiJulZM4DssyN0HcK2XXTnykN_Ir2ee2pXV-CT367nKbdbTvRX4pTM How to get commit data Of course – this is pretty easy with the libraries (I use goa for managing access tokens – see Github service for Goa examples), so here’s the entire code for getting commit information on a given repo. var git = new cGitJsonApi.cGitJsonApi(SETTINGS).setAccessToken( getAccessToken('git')); Logger.log (JSON.stringify(git.getCommitActi"
    },
    {
      "url": "https://stackoverflow.com/questions/52080747/implementing-exponential-backoff-with-node-js-and-promises",
      "content": "Skip to main content Stack Overflow About Products For Teams Stack Internal Implement a knowledge platform layer to power your enterprise and AI tools. Stack Data Licensing Get access to top-class technical expertise with trusted & attributed content. Stack Ads Connect your brand to the world’s most trusted technologist communities. Releases Keep up-to-date on features we add to Stack Overflow and Stack Internal. About the company Visit the blog Loading… current community Stack Overflow help chat Meta Stack Overflow your communities Sign up or log in to customize your list. more stack exchange communities company blog Log in Sign up Home Questions AI Assist Labs Tags Challenges Chat Articles Users Companies Collectives Communities for your favorite technologies. Explore all Collectives Stack Internal Stack Overflow for Teams is now called Stack Internal. Bring the best of human thought and AI automation together at your work. Try for free Learn more Stack Internal Bring the best of human thought and AI automation together at your work. Learn more Collectives™ on Stack Overflow Find centralized, trusted content and collaborate around the technologies you use most. Learn more about Collectives Stack Internal Knowledge at work Bring the best of human thought and AI automation together at your work. Explore Stack Internal Implementing exponential backoff with Node.js and Promises Ask Question Asked 7 years, 3 months ago Modified 15 days ago Viewed 17k times 5 I'm making about 70 requests to an API in my code. I'm getting an error response telling me that I'm making requests too quickly one after the other and I have decided to use the idea of exponential backoff to get through this problem. Currently, this is what my code looks like: let backoffTime = 1; for (let i = 0; i < fileIds.length; i++) { let fileId = fileIds[i]; getFileName(fileId, auth) .then((name) => { // do some work }) .catch((err) => { // assumes that the error is \"request made too soon\" backoff(backoffTime); backoffTime *= 2; i--; console.log(err); }); } function backoff(time) { let milliseconds = time * 1000; let start = (new Date()).getTime(); while (((new Date()).getTime() - start) < milliseconds) { // do nothing } } My getFileName function makes the request to the API and returns a Promise. Currently this does not work because Promises are async (kinda). My for loop runs really fast and calls the getFileName function which makes those API requests really fast. Then, it gets the error for some of the API calls in which case it updates the backoffTime. This implementation doesn't work. Any idea how I can implement this correctly? javascript node.js Share Improve this question Follow asked Aug 29, 2018 at 15:05 MickeyTheMouse 41933 gold badges55 silver badges1313 bronze badges 1 You can fix that using closures Titus – Titus 2018-08-29 15:08:51 +00:00 Commented Aug 29, 2018 at 15:08 Add a comment | 4 Answers 4 Sorted by: Reset to default Highest score (default) Trending (recent votes count more) Date modified (newest first) Date created (oldest first) 5 First of all blocking the browser with a nearly infinite loop is a very very bad idea, just use promises: const delay = ms => new Promise(res => setTimeout(res, ms)); Then just await the promise before continuing the loop and use the delay: (async function() { for (let i = 0; i < fileIds.length; i++) { let fileId = fileIds[i]; await getFileName(fileId, auth) .then((name) => { // do some work }) .catch((err) => { // assumes that the error is \"request made too soon\" backoffTime *= 2; i--; console.log(err); return delay(backoffTime); }); } })(); Share Improve this answer Follow edited Mar 23, 2021 at 9:47 Kiran Dash 4,9861313 gold badges5959 silver badges9595 bronze badges answered Aug 29, 2018 at 15:13 Jonas Wilms 139k2020 gold badges164164 silver badges164164 bronze badges Sign up to request clarification or add additional context in comments. 3 Comments Add a comment Titus Titus Over a year ago I think the OP wants "
    },
    {
      "url": "https://chartdb.io/templates/tags/postgres",
      "content": "Database schema templates for Postgres Discover a collection of real-world database schema diagrams for Postgres, featuring example applications and popular open-source projects. FeaturedAll Templates Tags MySQLPokemonExample AppsPostgresOpen SourceWordPressPHPDjangoPythonLaravelVisual Novel DatabaseNode.jsSaaSRailsCMSSymfony Airbnb Short-term Vacation Rentals Postgres Example Apps Django High-level Python web framework Postgres Open Source Django Python Laravel PHP web framework Postgres Open Source Laravel PHP Twitter Database Social media platform clone application Postgres Example Apps Visual Novel Database Visual Novel Database Postgres Visual Novel Database Adonis Acl Database Role based permissions Postgres Open Source Node.js Akaunting Online Accounting Software Postgres Open Source Laravel PHP Laravel Spark Recurring billing solution for Laravel Postgres Open Source Laravel PHP Voyager The Missing Admin for Laravel Postgres Open Source Laravel PHP Koel | koel.dev Music streaming server Postgres Open Source Laravel PHP Laravel Permission Roles and Permission For Laravel Postgres Open Source Laravel PHP Gravity Node.js SaaS Boilerplate Postgres SaaS Node.js Ticketit A simple helpdesk tickets system for Laravel Postgres Open Source Laravel PHP Lobsters Computing-focused community centered Postgres Example Apps Refinerycms Ruby on Rails - Content management system Postgres Open Source Rails CMS BuddyPress Social networking plugin for WordPress Postgres Open Source WordPress Snipe-It Free open source IT asset management Postgres Open Source Laravel PHP Comfortable Mexican Sofa Rails CMS - ComfortableMexicanSofa Postgres Open Source Rails CMS SaaS Pegasus Django-based SaaS template Postgres Python Django Bouncer Laravel Eloquent roles and abilities Postgres Laravel PHP Cabot Monitoring and alerts service Postgres Python Django Feedbin Simple RSS reader Postgres Open Source Rails Freescout Self-Hosted Zendesk Postgres Open Source Laravel PHP Pythonic News A Hacker News lookalike Postgres Python Django Flarum Discussion platform Postgres Open Source Laravel PHP Canvas Publishing on your own terms Postgres Open Source Laravel PHP Taggit Simple tagging for django Postgres Python Django Orchid Back-Office platform Postgres Open Source Laravel PHP Cachet Status page for your website Postgres Open Source Laravel PHP Reversion Version control for model instances Postgres Python Django Screeenly Capturing high-quality website screenshots Postgres Open Source Laravel PHP Deployer PHP application deployment tool Postgres Open Source Laravel PHP Devise Flexible Auth for Rails applications Postgres Open Source Rails Octobox GitHub notifications Manager Postgres Open Source Rails Pay-Rails Payments for Ruby on Rails apps Postgres Open Source Rails Pixelfed Photo Sharing. For Everyone. Postgres Open Source Laravel PHP Django-Axes Keep track of failed login attempts Postgres Python Django"
    },
    {
      "url": "https://www.youtube.com/watch?v=-06PzaWHbXM",
      "content": "AboutPressCopyrightContact usCreatorsAdvertiseDevelopersTermsPrivacyPolicy & SafetyHow YouTube worksTest new features© 2025 Google LLC"
    },
    {
      "url": "https://about.twimbit.com/about/blogs/reliable-background-task-execution-using-bullmq-and-node-js",
      "content": "Product twimbit membership twimbit vault Assembly by twimbit eXPERTISE Experience innovation B2B Marketing Accelerator Strategic Intelligence Customer stories Solutions Twimbit X The Innovators Circle EventsBlogs About Company Newsroom Our Team Careers Resources Contact us Sign inSign up Feed Customer stories Solutions Twimbit X Innovators Circle EventsBlogs About us Company Newsroom Our Team Careers Resources Contact us sign inSign Up Feed Blogs Reliable Background Task Execution using BullMQ and Node.js May 20, 2024 Copy as a link In modern Node.js applications, ensuring smooth background processing is crucial for maintaining responsiveness and scalability. Message queues offer an effective solution, decoupling message production from consumption and enabling asynchronous task handling. BullMQ, a popular choice, provides a robust and efficient way to implement message queues in your Node.js projects. This article guides you through integrating BullMQ for reliable background processing Understanding Message Queues Imagine a conveyor belt, producers place tasks on the belt (queue), and separate worker processes (consumers) pick them up for execution. This asynchronous approach decouples producers and consumers, allowing them to operate independently without hindering each other's performance. Message queues offer significant advantages: Scalability: Effortlessly scale producers and consumers to manage increasing workloads. Resilience: Tasks persist in the queue, ensuring delivery even if producers or consumers encounter temporary outages. Asynchronous Processing: Producers don't have to wait for tasks to finish processing, leading to a more responsive application. Fault Tolerance: Queues automatically retry tasks upon failures, enhancing system reliability Getting Started with BullMQ 1. Installation: Begin by installing the bullmq and ioredis packages using npm: npm install --save bullmq ioredis bullmq provides core functionalities for managing queues and jobs, while ioredis acts as the Redis client library. 2. Connecting to Redis: We are going to use a self-hosted Redis server, download redis from here and install it in your system https://redis.io/downloads/ const Redis = require('ioredis'); const redisConfig = const redisConnection = new Redis({ port: 6379, // Replace with your Redis port if different host: '127.0.0.1', // Replace with your Redis host if different }); module.exports = redisConnection; This code defines the Redis configuration and creates a connection object. 3. Creating a Queue: Import the Queue class from BullMQ and your Redis connection in your main application file (e.g., index.js) import {Queue} from 'bullmq'; const commentNotificationQueue = new Queue('comment-email-notification', {connection: redisConnection}); Here, you create a new BullMQ queue named comment-email-notification. The connection property specifies the Redis connection established earlier. Adding Jobs to the Queue 1. Job Data:‍ Jobs in BullMQ consist of data you want to process asynchronously. This data can be anything relevant to your task, such as file paths, user IDs, or API request parameters.‍ 2. Adding a Job: Use the add method on your queue instance to add a new job: async function addJobs() { const comments = [ { \"text\": \"I really enjoyed your article on machine learning! The explanation of different algorithms was very clear and concise. Keep up the good work!\", \"commenter_name\": \"John Smith\", \"commenter_email\": \"john.smith@example.com\", \"author_name\": \"Jane Doe\", \"author_email\": \"jane.doe@example.com\" }, { \"text\": \"This phone is amazing! The battery life is fantastic, and the camera takes stunning photos. I would highly recommend it to anyone looking for a new phone.\", \"commenter_name\": \"Sarah Lee\", \"commenter_email\": \"sarah.lee@example.com\", \"author_name\": \"Stephan Josh\" }, { \"text\": \"Thanks for your insights on the future of AI. I agree that ethical considerations are crucial as this technology advances.\", \"commenter_name\": "
    },
    {
      "url": "https://gist.github.com/rjz/15baffeab434b8125ca4d783f4116d81",
      "content": "Skip to content Search Gists Search Gists All gists Back to GitHub Sign in Sign up Sign in Sign up You signed in with another tab or window. Reload to refresh your session. You signed out in another tab or window. Reload to refresh your session. You switched accounts on another tab or window. Reload to refresh your session. Dismiss alert {{ message }} Instantly share code, notes, and snippets. rjz/crypto-aes-256-gcm-demo.js Last active November 7, 2025 10:28 Show Gist options Download ZIP Star 58 (58) You must be signed in to star a gist Fork 19 (19) You must be signed in to fork a gist Embed Select an option Embed Embed this gist in your website. Share Copy sharable link for this gist. Clone via HTTPS Clone using the web URL. No results found Learn more about clone URLs Clone this repository at &lt;script src=&quot;https://gist.github.com/rjz/15baffeab434b8125ca4d783f4116d81.js&quot;&gt;&lt;/script&gt; Save rjz/15baffeab434b8125ca4d783f4116d81 to your computer and use it in GitHub Desktop. Code Revisions 4 Stars 58 Forks 19 Embed Select an option Embed Embed this gist in your website. Share Copy sharable link for this gist. Clone via HTTPS Clone using the web URL. No results found Learn more about clone URLs Clone this repository at &lt;script src=&quot;https://gist.github.com/rjz/15baffeab434b8125ca4d783f4116d81.js&quot;&gt;&lt;/script&gt; Save rjz/15baffeab434b8125ca4d783f4116d81 to your computer and use it in GitHub Desktop. Download ZIP example using node.js crypto API with aes-256-gcm Raw crypto-aes-256-gcm-demo.js This file contains hidden or bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters Show hidden characters const buffer = require('buffer'); const crypto = require('crypto'); // Demo implementation of using `aes-256-gcm` with node.js's `crypto` lib. const aes256gcm = (key) => { const ALGO = 'aes-256-gcm'; // encrypt returns base64-encoded ciphertext const encrypt = (str) => { // The `iv` for a given key must be globally unique to prevent // against forgery attacks. `randomBytes` is convenient for // demonstration but a poor way to achieve this in practice. // // See: e.g. https://csrc.nist.gov/publications/detail/sp/800-38d/final const iv = new Buffer(crypto.randomBytes(12), 'utf8'); const cipher = crypto.createCipheriv(ALGO, key, iv); // Hint: Larger inputs (it's GCM, after all!) should use the stream API let enc = cipher.update(str, 'utf8', 'base64'); enc += cipher.final('base64'); return [enc, iv, cipher.getAuthTag()]; }; // decrypt decodes base64-encoded ciphertext into a utf8-encoded string const decrypt = (enc, iv, authTag) => { const decipher = crypto.createDecipheriv(ALGO, key, iv); decipher.setAuthTag(authTag); let str = decipher.update(enc, 'base64', 'utf8'); str += decipher.final('utf8'); return str; }; return { encrypt, decrypt, }; }; const KEY = new Buffer(crypto.randomBytes(32), 'utf8'); const aesCipher = aes256gcm(KEY); const [encrypted, iv, authTag] = aesCipher.encrypt('hello, world'); const decrypted = aesCipher.decrypt(encrypted, iv, authTag); console.log(decrypted); // 'hello, world' Copy link meSmashsta commented Dec 19, 2020 • edited Loading Uh oh! There was an error while loading. Please reload this page. Hi the decipher.setAuthTag(authTag) is commented out in node v14.15.2, how do I go about this? And so when I try to decrypt I get the error: TypeError: decipher.setAuthTag is not a function EDIT: fixed it, I was using createCipheriv instead of createDecipheriv, thanks for your article. Sorry, something went wrong. Uh oh! There was an error while loading. Please reload this page. Copy link coryhardman commented Apr 29, 2021 The commend: IV should be unique but necessarily random sort of leads one to the wrong understanding of how significant the IV is for GCM. See this article: https://crypto.stackexchange.com/question"
    },
    {
      "url": "https://gist.github.com/aberba/6695eb5dc8285b6f7a2d26482d79298e",
      "content": "Skip to content Search Gists Search Gists All gists Back to GitHub Sign in Sign up Sign in Sign up You signed in with another tab or window. Reload to refresh your session. You signed out in another tab or window. Reload to refresh your session. You switched accounts on another tab or window. Reload to refresh your session. Dismiss alert {{ message }} Instantly share code, notes, and snippets. aberba/AesUtil.ts Forked from jonaaix/AesUtil.ts Created December 1, 2023 21:31 Show Gist options Download ZIP Star 0 (0) You must be signed in to star a gist Fork 0 (0) You must be signed in to fork a gist Embed Select an option Embed Embed this gist in your website. Share Copy sharable link for this gist. Clone via HTTPS Clone using the web URL. No results found Learn more about clone URLs Clone this repository at &lt;script src=&quot;https://gist.github.com/aberba/6695eb5dc8285b6f7a2d26482d79298e.js&quot;&gt;&lt;/script&gt; Save aberba/6695eb5dc8285b6f7a2d26482d79298e to your computer and use it in GitHub Desktop. Code Revisions 13 Embed Select an option Embed Embed this gist in your website. Share Copy sharable link for this gist. Clone via HTTPS Clone using the web URL. No results found Learn more about clone URLs Clone this repository at &lt;script src=&quot;https://gist.github.com/aberba/6695eb5dc8285b6f7a2d26482d79298e.js&quot;&gt;&lt;/script&gt; Save aberba/6695eb5dc8285b6f7a2d26482d79298e to your computer and use it in GitHub Desktop. Download ZIP Node.js - AES Encryption/Decryption with AES-256-GCM using random Initialization Vector + Salt Raw AesUtil.ts This file contains hidden or bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters Show hidden characters /** * Cryptography Functions * * Forked from AndiDittrich/AesUtil.js * https://gist.github.com/AndiDittrich/4629e7db04819244e843 */ import crypto, { CipherGCM, CipherGCMTypes, DecipherGCM } from 'crypto'; import { Password } from './types'; /** * Get encryption/decryption algorithm */ function getAlgorithm(): CipherGCMTypes { return 'aes-256-gcm'; } /** * Get encrypted string prefix */ function getEncryptedPrefix(): string { return 'enc::'; } /** * Derive 256 bit encryption key from password, using salt and iterations -> 32 bytes * @param password * @param salt * @param iterations */ function deriveKeyFromPassword(password: Password, salt: Buffer, iterations: number): Buffer { return crypto.pbkdf2Sync(password, salt, iterations, 32, 'sha512'); } /** * Encrypt AES 256 GCM * @param plainText * @param password */ export function encryptAesGcm(plainText: string | object, password: Password): string | undefined { try { if (typeof plainText === 'object') { plainText = JSON.stringify(plainText); } else { plainText = String(plainText); } const algorithm: CipherGCMTypes = getAlgorithm(); // Generate random salt -> 64 bytes const salt = crypto.randomBytes(64); // Generate random initialization vector -> 16 bytes const iv = crypto.randomBytes(16); // Generate random count of iterations between 10.000 - 99.999 -> 5 bytes const iterations = Math.floor(Math.random() * (99999 - 10000 + 1)) + 10000; // Derive encryption key const encryptionKey = deriveKeyFromPassword(password, salt, Math.floor(iterations * 0.47 + 1337)); // Create cipher // @ts-ignore: TS expects the wrong createCipher return type here const cipher: CipherGCM = crypto.createCipheriv(algorithm, encryptionKey, iv); // Update the cipher with data to be encrypted and close cipher const encryptedData = Buffer.concat([cipher.update(plainText, 'utf8'), cipher.final()]); // Get authTag from cipher for decryption // 16 bytes const authTag = cipher.getAuthTag(); // Join all data into single string, include requirements for decryption const output = Buffer.concat([salt, iv, authTag, Buffer.from(iterations.toString()), encryptedData]).toString('hex'); return getE"
    },
    {
      "url": "https://www.reddit.com/r/node/comments/o2ron2/question_endtoend_encryption_with_node_postgres/",
      "content": "Skip to main content Open menu Open navigation Go to Reddit Home r/node A chip A close button Log In Log in to Reddit Expand user menu Open settings menu Go to node r/node • Ancinek Português (Brasil)繁體中文FrançaisPortuguês (Portugal)DeutschEspañol (España)Italiano한국어SuomiMagyarไทยNederlandsBahasa MelayuTürkçePolski [Question] End-to-end encryption with Node, Postgres, and Javascript tldr; I'm a complete newbie in the e2ee world and would rather have this done by a 3rd party so I can learn how this works. If you know anybody that could share code and explain details – let me know. I'd be happy to pay for it if necessary. I'm working on a project to learn how e2ee is supposed to work. Let's say we have a scenario like this: Alice and Bob want to use a platform where they log in using email and password. The platform can be accessed on desktop and mobile devices. Alice would like to store encrypted information in a database or send encrypted files to an S3 server Bob will be able to fetch this encrypted information (data + files) If Alice agrees, Bob should be able to decrypt the information (data + files) How should a process like this look like? Read more Share New to Reddit? Create your account and connect with a world of communities. Continue with Email By continuing, you agree to our User Agreement and acknowledge that you understand the Privacy Policy. Public Anyone can view, post, and comment to this community 0 0 Top Posts Reddit reReddit: Top posts of June 18, 2021 Reddit reReddit: Top posts of June 2021 Reddit reReddit: Top posts of 2021 Reddit Rules Privacy Policy User Agreement Accessibility Reddit, Inc. © 2025. All rights reserved. Expand Navigation Collapse Navigation"
    }
  ]
}