{
  "projectSummary": "# GitHub Star Exchange Technical Summary\n\n## Goal & Scope\nSaaS platform enabling mutual GitHub engagement growth via credits: users earn credits by starring/watching/forking/following others' repos/accounts, spend credits on campaigns to receive reciprocal actions. Core flows: GitHub OAuth signup, repo import/sync, campaign creation (STAR/WATCH/FORK/FOLLOW_ACCOUNT with budgets/limits), \"Earn\" task queue for actions, automatic verification/credit allocation. Supports histories, block lists, trust scoring (reversal detection), premium plans (limits/priority), admin moderation. Boundaries: GitHub API integration only; no external payments initially; mirrors githubstar.com features (reciprocal actions, histories, blocks) but with new UI/UX/architecture.\n\n## Tech Stack\n- **Frontend**: React + TypeScript + Next.js/Vite SPA (REST/GraphQL API consumer, JWT auth).\n- **Backend API**: Node.js + TypeScript + NestJS/Express (auth, GitHub OAuth/PKCE, campaigns, credits, histories).\n- **Background Worker**: Node.js (action verification, task matching/queueing, syncs, trust scoring; BullMQ on Redis).\n- **Database**: PostgreSQL (users, oauth_accounts, github_profiles, repositories, campaigns, tasks, actions, credit_transactions, block_list, subscriptions).\n- **Cache/Queue**: Redis (rate limits, jobs, state).\n- **Deployment**: Render (1 web service for API+SPA, 1 worker, Postgres, KV/Redis).\n- **Other**: JWT sessions (encrypted tokens), HTTPS, structured logs/metrics.\n\n## Definition of Done\n- Full user flows operational: signup/OAuth, repo sync (initial/nightly), campaign CRUD (budgets, limits, status), Earn queue (prioritized tasks by credits/age/fairness), action verification (API check + auto-perform option, watchdog reversals).\n- GitHub API ops: user/repos fetch, star/watch/fork/follow (PUT/POST), existence checks (GET 204/404), rate limiting/backoff.\n- Credit system: transactions (earn/spend), balances; premium subscriptions (free/pro limits).\n- Features: histories (given/received, CSV export), block lists (users/repos), notifications (in-app/email), admin panel (bans, dashboards).\n- Data model implemented (10+ tables with FKs, JSONB metadata, encrypted fields).\n- Non-functionals: 99.5% availability, <300ms P95 API latency (",
  "architectSummary": "```markdown\n# Summary: Architect Specification for gimmestar (GitHub Star Exchange)\n\n## Project Overview\ngimmestar implements a GitHub Star Exchange system. The provided specification is **incomplete or truncated**, with an explicit warning to review manually. No full architecture, patterns, components, or workflows are detailed beyond hard constraints.\n\n## Key Architectural Patterns\n- None explicitly identified or described in the content.\n- Implied pattern: Randomized matching to enable indirect star exchanges, avoiding direct pairing.\n\n## Major Components and Relationships\n- No components listed.\n- No relationships, data flows, or module diagrams provided.\n- Dependencies inferred: GitHub API integration requiring OAuth scopes.\n\n## Critical Constraints and Quality Gates\n**Hard Constraints** (non-negotiable):\n- **GitHub ToS Compliance**:\n  - Prohibit direct \"star-for-star\" pairing; enforce **randomized matching** only.\n  - Limit automation to authorized scopes: `read:user`, `read:repo`, equivalents of `write:star`, `write:follow`.\n  - Implement **exponential backoff** on API calls to prevent rate-limiting or bans.\n- **GDPR/PII Compliance**:\n  - **Encrypt GitHub tokens** to protect personal identifiable information.\n\nThese form quality gates: All implementations must pass ToS randomization checks, scope restrictions, backoff logic, and token encryption audits. Violations risk platform bans or legal issues.\n\n## Non-Negotiable Design Decisions\n- Randomized matching as core mechanism for ToS adherence—no deterministic pairing allowed.\n- Scope minimization: Only read user/repo and write star/follow actions.\n- Defensive API handling: Exponential backoff mandatory.\n- Security-first PII: Token encryption required, aligning with GDPR.\n\n## Implications for Coder/Planner Nodes\n- **Execution Focus**: Prioritize constraint validation in all tasks (e.g., code reviews must verify randomization, backoff, encryption).\n- **Gaps**: Without full spec, assume minimal viable architecture around GitHub API proxy with matching logic. Manually expand/review incomplete sections.\n- **Risks**: ToS non-compliance could terminate project; test randomized matching rigorously (e.g., simulate 1000+ pairings for uniformity).\n\n**Word Count**: 312\n```\n```",
  "bestPracticesSummary": "# Best Practices Summary for Gimmestar MVP (2025 Stack)\n\n## Stack & Decisions (10-50k Users)\n- **Core**: NestJS 11 (backend: modules/DI), Next.js 15 App Router (frontend: SSR/SEO), Drizzle ORM (TS queries, no raw SQL), BullMQ 5+ on Redis (queues), Node 22 LTS, Postgres 17. Deploy monolith on Render ($<100/mo: web+DB+Redis).\n- **Auth**: GitHub OAuth PKCE + JWT httpOnly cookies (RS256, AES-256-GCM encrypted tokens). No localStorage.\n- **Metrics Weights**: PerfGain (25%, P95<300ms), SecRisk (30%), DevTime (15%), Maintainability (15%), Cost (10%).\n- **Risks/Guardrails**: GitHub backoff (node-backoff, <5k/hr/user), trust score (<50 throttle), ACID credit txns via `credit_transactions` event log + Redis cache.\n\n## Architecture Patterns\n- **MVP Monolith (Pattern A)**: Turborepo (Nest+Next), serve Next build from Nest (`@nestjs/serve-static`). Validate: Artillery 100rps P95<300ms.\n- **Queues (Pattern B, >20k users)**: BullMQ for GitHub sync/verify (`exponential backoff`, idempotent jobs). Worker dyno separate.\n- **Trust/Credits (Pattern C)**: DB events (`delta: integer`), replayable SUM queries match Redis TTL 5m balance.\n- **Trade-offs**: REST (MVP, cacheable) > tRPC; async queues > sync (scale+).\n\n## Security (OWASP 2025)\n- **Mandatory**: PKCE/JWT RS256, helmet, rate-limit 100/min login, encrypt PII/tokens (rotate 90d), Drizzle params (no SQLi), SameSite=Strict CSRF, Redis blacklist revoked JWTs.\n- **GitHub**: Octokit REST + backoff; per-user counters; 429→retry/pause queue.\n- **Validate**: Snyk/ZAP A score, `npm audit`.\n\n## Testing & Quality\n- **Unit**: Vitest 90% coverage (mock Octokit).\n- **Integration/E2E**: Supertest + Playwright (80% critical: auth/earn), nock/msw for GitHub.\n- **Perf/Sec**: Artillery/k6 (10rps<300ms), OW",
  "cacheTimestamp": 1764241986101,
  "mtimes": {
    "projectMd": 1764233526171.459,
    "architectMd": 1764241357263.9832,
    "bestPracticesMd": 1764241000879.5742
  }
}